#!/bin/bash

# Get focused window title using hyprctl
window_info=$(hyprctl activewindow 2>/dev/null)

if [ $? -ne 0 ]; then
    echo '{"text": ""}'
    exit 0
fi

# Extract title from hyprctl output
title=$(echo "$window_info" | grep "title:" | sed 's/title: //' | sed 's/^[[:space:]]*//' | sed 's/[[:space:]]*$//')

if [ -z "$title" ]; then
    title=""
fi

# Truncate title if too long
if [ ${#title} -gt 70 ]; then
    title="${title:0:70}..."
fi

echo "{\"text\": \"$title\"}"
